<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/CSS/styles.css" />
    <link rel="stylesheet" href="/CSS/profile.css" />
  </head>
  <body>
    <%- include('../partials/header') %> <%- include('../partials/sidebar') %>
    <div class="main-content">
      <div class="container mt-5">
        <div class="profile-container">
          <div class="profile-image">
            <i class="fas fa-user-circle"></i>
          </div>
          <div class="profile-details">
            <h2><%= user.firstName + " " + user.lastName %></h2>
            <div class="bio-section">
              <p class="profile-label">Bio:</p>
              <p>
                <%= user.bio || "Add a bio. Let people know who you are!" %>
              </p>
            </div>
            <p>Email:</p>
            <p class="profile-label"><%= user.email %></p>
            <button
              class="edit-btn btn btn-primary"
              data-toggle="modal"
              data-target="#editProfileModal"
            >
              Edit Profile
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Edit Profile Modal -->
    <div
      class="modal fade"
      id="editProfileModal"
      tabindex="-1"
      aria-labelledby="editProfileModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <form action="/users/profile/edit" method="POST">
            <div class="modal-header">
              <h5 class="modal-title" id="editProfileModalLabel">
                Edit Profile
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div class="form-group">
                <label for="firstName">First Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="firstName"
                  name="firstName"
                  value="<%= user.firstName %>"
                  required
                />
              </div>
              <div class="form-group">
                <label for="lastName">Last Name</label>
                <input
                  type="text"
                  class="form-control"
                  id="lastName"
                  name="lastName"
                  value="<%= user.lastName %>"
                  required
                />
              </div>
              <div class="form-group">
                <label for="bio">Bio</label>
                <textarea class="form-control" id="bio" name="bio" rows="4">
<%= user.bio || "" %></textarea
                >
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Cancel
              </button>
              <button type="submit" class="btn btn-success save-btn">
                Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <%- include('../partials/footer') %>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </body>
</html>
